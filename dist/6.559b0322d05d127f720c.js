(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{214:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(7),c=a(4),o=a(3),r=a(2),i=a.n(r),u=a(11),m=a(18),d=a(10),p=a(14),f=a(104),E=a.n(f),b=a(19);t.default=Object(c.g)((function(e){const t=Object(n.useContext)(d.a),a=Object(n.useContext)(p.a),{id:r}=Object(c.f)(),[f,g]=Object(n.useState)(!0),[h,w]=Object(n.useState)();if(Object(n.useEffect)(()=>{const e=i.a.CancelToken.source();return async function(){try{const t=await i.a.get("post/"+r,{cancelToken:e.token});w(t.data),g(!1)}catch(e){console.log("Failed to load post.")}}(),()=>{e.cancel()}},[r]),!f&&!h)return s.a.createElement(m.a,null);if(f)return s.a.createElement(l.a,{title:"Loading..."},s.a.createElement(u.a,null));const y=new Date(h.createdDate),N=`${y.getMonth()+1}/${y.getDate()}/${y.getFullYear()}`;return s.a.createElement(l.a,{title:h.title},s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement("h2",null,h.title),!!t.loggedIn&&t.user.username==h.author.username&&s.a.createElement("span",{className:"pt-2"},s.a.createElement(o.b,{to:`/post/${h._id}/edit`,"data-tip":"Edit","data-for":"edit",className:"text-primary mr-2"},s.a.createElement("i",{className:"fas fa-edit"})),s.a.createElement(b.a,{id:"edit",className:"custom-tooltip"})," ",s.a.createElement("a",{onClick:async function(){if(window.confirm("Are you sure you want to delete this?"))try{"Success"==(await i.a.delete("/post/"+r,{data:{token:t.user.token}})).data&&(a({type:"flashMessage",value:"Post was deleted."}),e.history.push("/profile/"+t.user.username))}catch(e){console.log("Deleting failed")}},"data-tip":"Delete","data-for":"delete",className:"delete-post-button text-danger"},s.a.createElement("i",{className:"fas fa-trash"})),s.a.createElement(b.a,{id:"delete",className:"custom-tooltip"}))),s.a.createElement("p",{className:"text-muted small mb-4"},s.a.createElement(o.b,{to:"/profile/"+h.author.username},s.a.createElement("img",{className:"avatar-tiny",src:h.author.avatar})),"Posted by"," ",s.a.createElement(o.b,{to:"/profile/"+h.author.username},h.author.username)," ","on ",N),s.a.createElement("div",{className:"body-content"},s.a.createElement(E.a,{source:h.body,allowedTypes:["paragraph","strong","text","heading","list","listItem"]})))}))}}]);